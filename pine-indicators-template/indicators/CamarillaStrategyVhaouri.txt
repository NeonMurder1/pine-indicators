//@version=2
//Created by CristianD
strategy(title="CamarillaStrategyVhaouri", shorttitle="CD_Camarilla_StrategyV1", overlay=true) 
//sd = input(true, title="Show Daily Pivots?")
EMA = ema(close,8)
hh ="X"
//Camarilla
pivot = (high + low + close ) / 3.0 
range = high - low
h5 = (high/low) * close 
h4 = close + (high - low) * 1.1 / 2.0
h3 = close + (high - low) * 1.1 / 4.0
h2 = close + (high - low) * 1.1 / 6.0
h1 = close + (high - low) * 1.1 / 12.0
l1 = close - (high - low) * 1.1 / 12.0
l2 = close - (high - low) * 1.1 / 6.0
l3 = close - (high - low) * 1.1 / 4.0
l4 = close - (high - low) * 1.1 / 2.0
h6 = h5 + 1.168 * (h5 - h4) 
l5 = close - (h5 - close)
l6 = close - (h6 - close)

// Daily line breaks
//sopen = security(tickerid, "D", open [1])
//shigh = security(tickerid, "D", high [1])
//slow = security(tickerid, "D", low [1])
//sclose = security(tickerid, "D", close [1])
//
// Color
//dcolor=sopen != sopen[1] ? na : black
//dcolor1=sopen != sopen[1] ? na : red
//dcolor2=sopen != sopen[1] ? na : green

//Daily Pivots 
dtime_pivot = security(tickerid, 'W', pivot[1]) 
dtime_h6 = security(tickerid, 'W', h6[1]) 
dtime_h5 = security(tickerid, 'W', h5[1]) 
dtime_h4 = security(tickerid, 'W', h4[1]) 
dtime_h3 = security(tickerid, 'W', h3[1]) 
dtime_h2 = security(tickerid, 'W', h2[1]) 
dtime_h1 = security(tickerid, 'W', h1[1]) 
dtime_l1 = security(tickerid, 'W', l1[1]) 
dtime_l2 = security(tickerid, 'W', l2[1]) 
dtime_l3 = security(tickerid, 'W', l3[1]) 
dtime_l4 = security(tickerid, 'W', l4[1]) 
dtime_l5 = security(tickerid, 'W', l5[1]) 
dtime_l6 = security(tickerid, 'W', l6[1]) 

men = (dtime_l1-dtime_l2)/7
//plot(sd and dtime_l5 ? dtime_l5 : na, title="Daily L5",color=dcolor2, linewidth=2)
//plot(sd and dtime_l6 ? dtime_l6 : na, title="Daily L6",color=dcolor2, linewidth=2)

longCondition = close <=dtime_l3 and close  <= (dtime_l3-men)//close >dtime_h4 and open < dtime_h4 and EMA < close
if (longCondition)
    strategy.entry("Long12", strategy.long)
    strategy.exit ("Exit Long","Longl2") 
if (high >= (dtime_h1-men))
    strategy.entry("Short", strategy.short)
    strategy.exit ("Exit Short","Short")
  

    
